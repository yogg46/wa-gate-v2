# ğŸ“– WA-Gate v2

A **WhatsApp Gateway** built with Node.js, designed to provide a scalable, secure, and developer-friendly API layer for sending and receiving WhatsApp messages. Includes logging, configuration validation, middleware, and frontend integration.

---

## ğŸš€ Features

- **Clean Project Structure** â†’ Scalable & maintainable architecture.
- **Configuration Management** â†’ `.env` with validation using **Joi**.
- **Logging** â†’ Production-ready logging powered by **Winston**.
- **Security** â†’ Built-in Helmet, CORS, and rate limiting.
- **Code Quality** â†’ ESLint + Prettier for consistent coding style.
- **Version Control** â†’ Git initialized with proper `.gitignore`.

---

## ğŸ“‚ Project Structure

```
wa-gate-v2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/      # Controllers for API endpoints
â”‚   â”œâ”€â”€ middlewares/      # Auth, rate limiting, validation
â”‚   â”œâ”€â”€ routes/           # API routes definitions
â”‚   â”œâ”€â”€ services/         # Core services (WhatsApp, QR, etc.)
â”‚   â”œâ”€â”€ utils/            # Helpers (logger, config loader)
â”‚   â””â”€â”€ config/           # Environment & app configuration
â”œâ”€â”€ tests/                # Unit & integration tests
â”œâ”€â”€ public/               # Frontend (dashboard.html, broadcast.html)
â”œâ”€â”€ logs/                 # Winston log outputs
â”œâ”€â”€ .env.example          # Example environment variables
â”œâ”€â”€ package.json          # Dependencies & scripts
â””â”€â”€ server.js             # Application entry point
```

---

## âš™ï¸ Installation

```bash
# 1. Clone repository
git clone https://github.com/yogg46/wa-gate-v2.git
cd wa-gate-v2

# 2. Install dependencies
npm install

# 3. Copy environment file
cp .env.example .env

# 4. Run in development mode
npm run dev
```

---

## ğŸ”‘ Environment Variables

All environment variables are validated with **Joi**. See `.env.example` for details.

| Variable         | Description                          |
| ---------------- | ------------------------------------ |
| `PORT`           | Server port                          |
| `SESSION_SECRET` | Secret key (min 32 chars)            |
| `NODE_ENV`       | `development` or `production`        |
| `WHATSAPP_PHONE` | WhatsApp number for connection       |
| `DB_URL`         | Database connection string (if used) |

âš ï¸ **Important:**

- Do **NOT** commit `.env` file (already in `.gitignore`).
- Always generate a strong `SESSION_SECRET` before production.

---

## ğŸ› ï¸ Development Workflow

### Whatâ€™s Done âœ…

- Project structure ready
- Config validation
- Logging with Winston
- Security middleware (Helmet, CORS, rate limiting)
- ESLint + Prettier configured
- Git & `.gitignore` setup

### Next Steps ğŸ¯

1. Implement **WhatsApp Service** (`src/services/whatsapp.service.js`)
2. Create **Middlewares** (auth, rate limit, validation)
3. Build **Controllers** (message, qr, dashboard)
4. Setup **Routes** (api, dashboard, auth)
5. Migrate **Frontend** (dashboard.html, broadcast.html)
6. Write **Tests** (unit & integration)
7. Add **Documentation** (API docs, usage guide)

---

## ğŸ§© Usage

After running the server:

- API available at: `http://localhost:3000/api`
- Dashboard available at: `http://localhost:3000/dashboard`

Example cURL request:

```bash
curl -H "Authorization: Bearer <YOUR_TOKEN>" \
  -d '{"to": "628123456789", "message": "Hello from WA-Gate v2!"}' \
  http://localhost:3000/api/messages
```

---

## ğŸ§ª Testing

```bash
# Run all tests
npm test

# Run with coverage
npm run test:coverage
```

Unit tests and integration tests are located in `/tests`.

---

## ğŸ“‘ Documentation

- API documentation (coming soon) â†’ Will describe all endpoints (`/api/messages`, `/api/qr`, `/api/dashboard`, `/api/auth`).
- Frontend documentation â†’ Dashboard usage, broadcasting flow.

---

## âš ï¸ Security Notes

- Never expose `.env` to version control.
- Change all default credentials before production.
- Use strong `SESSION_SECRET` (min 32 chars).
- Backup your old project before migration.

---

## ğŸ’¡ Pro Tips

- **Test as you build** â†’ donâ€™t wait until the end.
- **Commit often** â†’ small, meaningful commits.
- **Read logs** â†’ Winston logs everything inside `/logs`.
- **Use nodemon** â†’ auto-restart during development.
- **Monitor errors** â†’ check `logs/` for all error details.

---

## ğŸ“ License

MIT License Â© 2025 yogg46
